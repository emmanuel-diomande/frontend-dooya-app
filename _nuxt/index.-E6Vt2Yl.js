import{_ as T}from"./product.search.tWLoe57f.js";import{a as b,U as j,_ as $}from"./url.route.8-S1bK5-.js";import{_ as J}from"./nuxt-link.P6j5507U.js";import{_ as U}from"./simple.loader.eTDx8N0C.js";import{_ as B}from"./footer.QfbCJfdi.js";import{r as u,u as M,m as P,n as G,f as H,c,a as e,b as h,t as l,l as A,F as y,q as O,i as N,s as K,h as C,x as Q,j as Y,y as m,o as i,w as W}from"./entry.iA16sMA1.js";import"./vue.f36acd1f.zo9dVKtY.js";const X={class:"flex flex-col font-sans pb-24 h-full"},Z=e("div",{class:"fixed bg-gray-100 inset-0 -z-40"},null,-1),ee={class:"flex items-start lg:w-10/12 w-full lg:mt-[14rem] mt-32 m-auto gap-4 flex-col lg:flex-row h-full"},te={class:"lg:w-9/12 w-11/12 bg-white pb-4 rounded-lg m-auto h-full flex flex-col"},se={class:"border-b-[1px] px-4 py-4 text-base font-bold"},oe={class:"w-full"},le={key:0,class:"flex flex-col px-4 gap-4 w-full divide-y-[1px]"},ae={class:"flex lg:flex-row flex-col justify-between w-full pt-4 gap-2"},ne={class:"h-auto lg:w-20 w-28"},ie={class:"flex flex-col"},ce={class:"lg:text-base text-sm"},re={class:"text-lg font-bold"},ue={class:"flex lg:flex-col flex-row justify-between gap-2"},de={class:"flex items-center gap-2 font-bold"},_e=["onClick"],fe={class:"text-base font-bold"},pe=["onClick"],ve=["onClick"],xe=e("i",{class:"fi fi-rr-trash-xmark"},null,-1),he=e("span",null,"Supprimer",-1),me=[xe,he],ge={key:1,class:"h-64 justify-center items-center flex text-xl font-medium text-center"},we={class:"lg:w-3/12 w-11/12 flex flex-col gap-4 lg:m-0 m-auto font-sans"},be={class:"bg-white rounded-lg w-full"},ye=e("div",{class:"border-b-[1px] px-4 py-4 text-base font-bold"},[e("span",null,"Resumer du panier")],-1),Ce={class:"px-4 py-2 flex flex-col gap-4"},Se={class:"mt-2 flex justify-between"},ke=e("span",null,"Sous-total",-1),Fe={class:"w-full pb-2"},je={class:"fixed w-full h-full flex justify-center items-center inset-0 z-50 bg-gray-700/50"},Ae={class:"bg-white shadow-2xl lg:w-4/12 w-11/12 h-[60vh] rounded-lg relative"},Oe={class:"border-b-[1px] px-4 py-2 flex justify-between items-center"},Ne=e("span",{class:"text-lg"},"Valider la commande",-1),qe={class:"flex flex-col divide-y-[1px] px-4"},Ee={key:0,class:"flex flex-col py-4"},Ie={class:"flex flex-col py-4"},Re=e("span",null,"Choissiez une zone de Livraison",-1),Le=["value"],Ve={class:"flex justify-between items-center py-2"},ze={class:""},De={class:"flex justify-between items-center py-2"},Te=e("span",null,"Frais de Livraison",-1),$e={key:0,class:""},Je={class:"flex justify-between items-center py-2"},Ue=e("span",{class:"text-lg font-bold"},"Total",-1),Be={key:0,class:"text-xl font-bold"},Me={class:"border-t-[1px] absolute bottom-2 py-2 w-full flex justify-center items-center"},Pe={key:1},et={__name:"index",setup(Ge){u([]);const _=u(0),r=u(0),q=M(),a=P(()=>m().data),S=()=>{const t=window.localStorage.getItem("cart");let s=t?JSON.parse(t):[];m().data=s,f()},f=()=>{a.value.length!=0&&a.value.forEach(t=>{_.value=_.value+t.pr__qte,r.value=r.value+t.price*t.pr__qte})},x=u(!1),E=()=>{const t=window.localStorage.getItem("token");(t||null)&&a.value.length!=0?x.value=!0:q.push("/auth/sign-in")},k=(t,s)=>{a.value.length!=0&&(r.value=0,_.value=0,a.value.forEach(n=>{t=="plus"&&n.id==s?(n.pr__qte=n.pr__qte+1,f(),window.localStorage.setItem("cart",JSON.stringify(a.value))):t=="moins"&&n.id==s&&n.pr__qte>1&&(n.pr__qte=n.pr__qte-1,f(),window.localStorage.setItem("cart",JSON.stringify(a.value)))}))},I=t=>{a.value.length!=0&&(r.value=0,_.value=0,m().data=a.value.filter(s=>s.id!=t),window.localStorage.setItem("cart",JSON.stringify(a.value)),console.log(t),f())},g=u([]),d=u(0);u(0);const w=u(!1),R=async()=>{const{data:t}=await b.get(j.AREA_DELIVERY);t&&(g.value=t.data,d.value=g.value[0])},L=async()=>{var n;const t=[];w.value=!0,a.value.forEach(v=>{t.push({produit_id:v.id,qte_unitaire:v.pr__qte,prix_unitaire:v.price})}),b.defaults.headers.common.Authorization=`Bearer ${window.localStorage.getItem("token")}`;const{data:s}=await b.post(j.ORDER,{qte_des_articles:_.value,sous_total:r.value,livraison_id:(n=d.value)==null?void 0:n.id,produits:t});s&&(console.log(s),w.value=!1,x.value=!1,m().data=[],window.localStorage.setItem("cart",JSON.stringify(a.value)),f())};G(()=>{S()});const p=u();return H(()=>{p.value=window.localStorage.getItem("user")?JSON.parse(window.localStorage.getItem("user")):null,S(),R()}),(t,s)=>{const n=T,v=$,V=J,z=U,D=B;return i(),c(y,null,[e("div",X,[h(n),Z,e("div",ee,[e("div",te,[e("div",se," Panier ("+l(_.value)+") ",1),e("div",oe,[A(a).length!=0?(i(),c("div",le,[(i(!0),c(y,null,O(A(a),o=>(i(),c("div",null,[e("div",ae,[h(V,{to:"/detail/"+o.id,class:"flex gap-4"},{default:W(()=>[e("div",ne,[h(v,{class:"w-full h-full object-cover",src:o.media[0].original_url},null,8,["src"])]),e("div",ie,[e("span",ce,l(o.title),1),e("span",re,l(o.price)+" Fcfa",1)])]),_:2},1032,["to"]),e("div",ue,[e("div",de,[e("div",{onClick:F=>k("moins",o.id),class:"bg-orange-400 w-6 h-6 flex justify-center items-center text-white text-xl rounded-full cursor-pointer"}," - ",8,_e),e("span",fe,l(o.pr__qte),1),e("div",{onClick:F=>k("plus",o.id),class:"bg-orange-400 w-6 h-6 flex justify-center items-center text-white text-xl rounded-full cursor-pointer"}," + ",8,pe)]),e("div",{onClick:F=>I(o.id),class:"active:bg-orange-50 flex gap-1 items-center justify-center text-orange-400 font-bold cursor-pointer"},me,8,ve)])])]))),256))])):(i(),c("div",ge," Vous n'avez pas encors ajouter de produit "))])]),e("div",we,[e("div",be,[ye,e("div",Ce,[e("div",Se,[ke,e("span",null,l(r.value)+" FCFA",1)]),e("div",Fe,[e("button",{onClick:E,class:"bg-orange-400 w-full py-3 text-base rounded-full text-white font-bold"}," Commander ("+l(r.value)+" FCFA) ",1)])])])])])]),N(e("div",je,[e("div",Ae,[e("div",Oe,[Ne,e("i",{class:"fi fi-rr-cross-small absolute right-4 text-xl cursor-pointer",onClick:s[0]||(s[0]=o=>x.value=!1)})]),e("div",qe,[p.value?(i(),c("div",Ee,[e("span",null,l(p.value.name),1),e("span",null,l(p.value.email),1),e("span",null,l(p.value.phone),1)])):C("",!0),e("div",Ie,[Re,N(e("select",{class:"p-2 rounded-full border","onUpdate:modelValue":s[1]||(s[1]=o=>d.value=o)},[(i(!0),c(y,null,O(g.value,o=>(i(),c("option",{value:o},[e("span",null,l(o.zone)+" ("+l(o.tarif)+"Fcfa)",1)],8,Le))),256))],512),[[Q,d.value]])]),e("div",Ve,[e("span",null,"Total articles ("+l(_.value)+")",1),e("span",ze,l(r.value)+" FCFA",1)]),e("div",De,[Te,d.value?(i(),c("span",$e,l(d.value.tarif)+" FCFA",1)):C("",!0)]),e("div",Je,[Ue,d.value?(i(),c("span",Be,l(r.value+d.value.tarif)+" FCFA",1)):C("",!0)])]),e("div",Me,[e("button",{class:"bg-orange-400 px-8 py-2 font-bold text-white w-11/12 rounded-full flex justify-center items-center",onClick:L},[w.value?(i(),Y(z,{key:0})):(i(),c("span",Pe," CONFIRMER LA COMMANDE"))])])])],512),[[K,x.value]]),h(D)],64)}}};export{et as default};

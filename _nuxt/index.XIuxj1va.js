import{_ as T,a as $}from"./product.search.KllLMBqn.js";import{_ as J}from"./nuxt-link.0ZLSw5nl.js";import{_ as U}from"./simple.loader.Ti85RGiE.js";import{_ as B}from"./footer.niNiYKyM.js";import{r as u,u as M,m as P,n as G,f as H,c,a as e,b as h,t as l,l as j,F as b,q as A,i as O,s as K,h as y,x as Q,j as Y,y as m,o as i,w as W}from"./entry.LQPk8cO_.js";import{a as C,U as N}from"./url.route.lNHNiQEV.js";import"./vue.f36acd1f.tg8AccyI.js";const X={class:"flex flex-col font-sans pb-24 h-full"},Z=e("div",{class:"fixed bg-gray-50 inset-0 -z-40"},null,-1),ee={class:"flex items-start lg:w-10/12 w-full lg:mt-[14rem] mt-32 m-auto gap-4 flex-col lg:flex-row h-full"},te={class:"lg:w-9/12 w-11/12 bg-white pb-4 rounded-lg m-auto h-full flex flex-col"},se={class:"border-b-[1px] px-4 py-4 text-base font-bold"},oe={class:"w-full"},le={key:0,class:"flex flex-col px-4 gap-4 w-full divide-y-[1px]"},ae={class:"flex lg:flex-row flex-col justify-between w-full pt-4 gap-2"},ne={class:"h-16 w-16"},ie={class:"flex flex-col"},ce={class:"flex lg:flex-col flex-row justify-between gap-2"},re={class:"flex items-center gap-2 font-bold"},ue=["onClick"],de={class:"text-base font-bold"},_e=["onClick"],fe=["onClick"],pe=e("i",{class:"fi fi-rr-trash-xmark"},null,-1),ve=e("span",null,"Supprimer",-1),xe=[pe,ve],he={key:1,class:"h-64 justify-center items-center flex text-xl font-medium text-center"},me={class:"lg:w-3/12 w-11/12 flex flex-col gap-4 lg:m-0 m-auto font-sans"},ge={class:"bg-white rounded-lg w-full"},we=e("div",{class:"border-b-[1px] px-4 py-4 text-base font-bold"},[e("span",null,"Resumer du panier")],-1),be={class:"px-4 py-2 flex flex-col gap-4"},ye={class:"mt-2 flex justify-between"},Ce=e("span",null,"Sous-total",-1),Se={class:"w-full"},ke={class:"fixed w-full h-full flex justify-center items-center inset-0 z-50 bg-gray-700/50"},Fe={class:"bg-white shadow-2xl lg:w-4/12 w-11/12 h-[60vh] rounded-lg relative"},je={class:"border-b-[1px] px-4 py-2 flex justify-between items-center"},Ae=e("span",{class:"text-lg"},"Valider la commande",-1),Oe={class:"flex flex-col divide-y-[1px] px-4"},Ne={key:0,class:"flex flex-col py-4"},qe={class:"flex flex-col py-4"},Ee=e("span",null,"Choissiez une zone de Livraison",-1),Ie=["value"],Re={class:"flex justify-between items-center py-2"},Le={class:""},Ve={class:"flex justify-between items-center py-2"},ze=e("span",null,"Frais de Livraison",-1),De={key:0,class:""},Te={class:"flex justify-between items-center py-2"},$e=e("span",{class:"text-lg font-bold"},"Total",-1),Je={key:0,class:"text-xl font-bold"},Ue={class:"border-t-[1px] absolute bottom-2 py-2 w-full flex justify-center items-center"},Be={key:1},Xe={__name:"index",setup(Me){u([]);const _=u(0),r=u(0),q=M(),a=P(()=>m().data),S=()=>{const t=window.localStorage.getItem("cart");let s=t?JSON.parse(t):[];m().data=s,f()},f=()=>{a.value.length!=0&&a.value.forEach(t=>{_.value=_.value+t.pr__qte,r.value=r.value+t.price*t.pr__qte})},x=u(!1),E=()=>{const t=window.localStorage.getItem("cart");(t||null)&&a.value.length!=0?x.value=!0:q.push("/auth/sign-in")},k=(t,s)=>{a.value.length!=0&&(r.value=0,_.value=0,a.value.forEach(n=>{t=="plus"&&n.id==s?(n.pr__qte=n.pr__qte+1,f(),window.localStorage.setItem("cart",JSON.stringify(a.value))):t=="moins"&&n.id==s&&n.pr__qte>1&&(n.pr__qte=n.pr__qte-1,f(),window.localStorage.setItem("cart",JSON.stringify(a.value)))}))},I=t=>{a.value.length!=0&&(r.value=0,_.value=0,m().data=a.value.filter(s=>s.id!=t),window.localStorage.setItem("cart",JSON.stringify(a.value)),console.log(t),f())},g=u([]),d=u(0);u(0);const w=u(!1),R=async()=>{const{data:t}=await C.get(N.AREA_DELIVERY);t&&(g.value=t.data,d.value=g.value[0])},L=async()=>{var n;const t=[];w.value=!0,a.value.forEach(v=>{t.push({produit_id:v.id,qte_unitaire:v.pr__qte,prix_unitaire:v.price})}),C.defaults.headers.common.Authorization=`Bearer ${window.localStorage.getItem("token")}`;const{data:s}=await C.post(N.ORDER,{qte_des_articles:_.value,sous_total:r.value,livraison_id:(n=d.value)==null?void 0:n.id,produits:t});s&&(console.log(s),w.value=!1,x.value=!1,m().data=[],window.localStorage.setItem("cart",JSON.stringify(a.value)),f())};G(()=>{S()});const p=u();return H(()=>{p.value=window.localStorage.getItem("user")?JSON.parse(window.localStorage.getItem("user")):null,S(),R()}),(t,s)=>{const n=T,v=$,V=J,z=U,D=B;return i(),c(b,null,[e("div",X,[h(n),Z,e("div",ee,[e("div",te,[e("div",se," Panier ("+l(_.value)+") ",1),e("div",oe,[j(a).length!=0?(i(),c("div",le,[(i(!0),c(b,null,A(j(a),o=>(i(),c("div",null,[e("div",ae,[h(V,{to:"/detail/"+o.id,class:"flex gap-4"},{default:W(()=>[e("div",ne,[h(v,{class:"w-full h-full object-cover",src:o.media[0].original_url},null,8,["src"])]),e("div",ie,[e("span",null,l(o.title),1),e("span",null,l(o.price)+" Fcfa",1)])]),_:2},1032,["to"]),e("div",ce,[e("div",re,[e("div",{onClick:F=>k("moins",o.id),class:"bg-orange-400 w-6 h-6 flex justify-center items-center text-white text-xl rounded-full cursor-pointer"}," - ",8,ue),e("span",de,l(o.pr__qte),1),e("div",{onClick:F=>k("plus",o.id),class:"bg-orange-400 w-6 h-6 flex justify-center items-center text-white text-xl rounded-full cursor-pointer"}," + ",8,_e)]),e("div",{onClick:F=>I(o.id),class:"active:bg-orange-50 flex gap-1 items-center justify-center text-orange-400 font-bold cursor-pointer"},xe,8,fe)])])]))),256))])):(i(),c("div",he," Vous n'avez pas encors ajouter de produit "))])]),e("div",me,[e("div",ge,[we,e("div",be,[e("div",ye,[Ce,e("span",null,l(r.value)+" FCFA",1)]),e("div",Se,[e("button",{onClick:E,class:"bg-orange-400 w-full py-3 text-base rounded-full text-white font-bold"}," Commander ("+l(r.value)+" FCFA) ",1)])])])])])]),O(e("div",ke,[e("div",Fe,[e("div",je,[Ae,e("i",{class:"fi fi-rr-cross-small absolute right-4 text-xl cursor-pointer",onClick:s[0]||(s[0]=o=>x.value=!1)})]),e("div",Oe,[p.value?(i(),c("div",Ne,[e("span",null,l(p.value.name),1),e("span",null,l(p.value.email),1),e("span",null,l(p.value.phone),1)])):y("",!0),e("div",qe,[Ee,O(e("select",{class:"p-2 rounded-full border","onUpdate:modelValue":s[1]||(s[1]=o=>d.value=o)},[(i(!0),c(b,null,A(g.value,o=>(i(),c("option",{value:o},[e("span",null,l(o.zone)+" ("+l(o.tarif)+"Fcfa)",1)],8,Ie))),256))],512),[[Q,d.value]])]),e("div",Re,[e("span",null,"Total articles ("+l(_.value)+")",1),e("span",Le,l(r.value)+" FCFA",1)]),e("div",Ve,[ze,d.value?(i(),c("span",De,l(d.value.tarif)+" FCFA",1)):y("",!0)]),e("div",Te,[$e,d.value?(i(),c("span",Je,l(r.value+d.value.tarif)+" FCFA",1)):y("",!0)])]),e("div",Ue,[e("button",{class:"bg-orange-400 px-8 py-2 font-bold text-white w-11/12 rounded-full flex justify-center items-center",onClick:L},[w.value?(i(),Y(z,{key:0})):(i(),c("span",Be," CONFIRMER LA COMMANDE"))])])])],512),[[K,x.value]]),h(D)],64)}}};export{Xe as default};
